import{u as j,r as u,j as s,H as p,L as n,a as d}from"./app-BPHxZrAS.js";function w({orders:a,posts:c}){const{flash:i}=j().props,[r,l]=u.useState(null),o=()=>{d.post("/admin/logout")},h=(e,t)=>{confirm(`Are you sure you want to cancel the subscription for "${t}"? This will prevent future payments from being processed.`)&&(l(e),d.post(`/admin/orders/${e}/cancel`,{},{onFinish:()=>l(null)}))},m=a?.filter(e=>e.status==="pending").length||0,x=a?.reduce((e,t)=>e+(parseFloat(t.total_price)||0),0)||0;return s.jsxs(s.Fragment,{children:[s.jsx(p,{title:"Admin Dashboard"}),s.jsxs("div",{className:"admin-dashboard",children:[s.jsxs("aside",{className:"admin-sidebar",children:[s.jsx("div",{className:"admin-sidebar-header",children:s.jsx("h1",{className:"admin-logo",children:"Admin Panel"})}),s.jsxs("nav",{className:"admin-nav",children:[s.jsxs(n,{href:"/admin/dashboard",className:"admin-nav-item active",children:[s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M2 10L10 2L18 10M2 17.5H7.5V12.5H12.5V17.5H18M2 10V18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Dashboard"]}),s.jsxs(n,{href:"/admin/posts",className:"admin-nav-item",children:[s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M9 12H15M9 16H15M17 21H7C5.89543 21 5 20.1046 5 19V5C5 3.89543 5.89543 3 7 3H12.5858C12.851 3 13.1054 3.10536 13.2929 3.29289L18.7071 8.70711C18.8946 8.89464 19 9.149 19 9.41421V19C19 20.1046 18.1046 21 17 21Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Posts"]}),s.jsxs(n,{href:"/admin/posts/create",className:"admin-nav-item",children:[s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M10 2V18M2 10H18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"New Post"]}),s.jsxs(n,{href:"/blog",className:"admin-nav-item",target:"_blank",children:[s.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{d:"M4 4H16V16H4V4Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M8 8H12M8 12H12M6 8H6.01M6 12H6.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),"View Blog"]})]}),s.jsx("div",{className:"admin-sidebar-footer",children:s.jsxs("button",{onClick:o,className:"admin-logout-btn",children:[s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M7.5 17.5H4.16667C3.72464 17.5 3.30072 17.3244 2.98816 17.0118C2.67559 16.6993 2.5 16.2754 2.5 15.8333V4.16667C2.5 3.72464 2.67559 3.30072 2.98816 2.98816C3.30072 2.67559 3.72464 2.5 4.16667 2.5H7.5M13.3333 14.1667L17.5 10M17.5 10L13.3333 5.83333M17.5 10H7.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Logout"]})})]}),s.jsxs("main",{className:"admin-main",children:[s.jsx("header",{className:"admin-header",children:s.jsxs("div",{className:"admin-header-content",children:[s.jsx("h2",{className:"admin-title",children:"Dashboard Overview"}),s.jsx("div",{className:"admin-header-actions",children:s.jsx("span",{className:"admin-date",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})})]})}),s.jsxs("div",{className:"admin-content",children:[i?.success&&s.jsx("div",{className:"admin-alert admin-alert-success",children:i.success}),s.jsxs("div",{className:"admin-stats-grid",children:[s.jsxs("div",{className:"admin-stat-card stat-card-primary",children:[s.jsx("div",{className:"stat-card-icon",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),s.jsxs("div",{className:"stat-card-content",children:[s.jsx("p",{className:"stat-card-label",children:"Total Orders"}),s.jsx("h3",{className:"stat-card-value",children:a?.length||0})]})]}),s.jsxs("div",{className:"admin-stat-card stat-card-warning",children:[s.jsx("div",{className:"stat-card-icon",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 9V13M12 17H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),s.jsxs("div",{className:"stat-card-content",children:[s.jsx("p",{className:"stat-card-label",children:"Pending Orders"}),s.jsx("h3",{className:"stat-card-value",children:m})]})]}),s.jsxs("div",{className:"admin-stat-card stat-card-success",children:[s.jsx("div",{className:"stat-card-icon",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M9 12H15M9 16H15M17 21H7C5.89543 21 5 20.1046 5 19V5C5 3.89543 5.89543 3 7 3H12.5858C12.851 3 13.1054 3.10536 13.2929 3.29289L18.7071 8.70711C18.8946 8.89464 19 9.149 19 9.41421V19C19 20.1046 18.1046 21 17 21Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),s.jsxs("div",{className:"stat-card-content",children:[s.jsx("p",{className:"stat-card-label",children:"Total Posts"}),s.jsx("h3",{className:"stat-card-value",children:c?.length||0})]})]}),s.jsxs("div",{className:"admin-stat-card stat-card-info",children:[s.jsx("div",{className:"stat-card-icon",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 2V22M17 5H9.5C8.57174 5 7.6815 5.36875 7.02513 6.02513C6.36875 6.6815 6 7.57174 6 8.5C6 9.42826 6.36875 10.3185 7.02513 10.9749C7.6815 11.6312 8.57174 12 9.5 12H14.5C15.4283 12 16.3185 12.3687 16.9749 13.0251C17.6312 13.6815 18 14.5717 18 15.5C18 16.4283 17.6312 17.3185 16.9749 17.9749C16.3185 18.6312 15.4283 19 14.5 19H6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),s.jsxs("div",{className:"stat-card-content",children:[s.jsx("p",{className:"stat-card-label",children:"Total Revenue"}),s.jsxs("h3",{className:"stat-card-value",children:[x.toLocaleString()," ֏"]})]})]})]}),s.jsxs("div",{className:"admin-table-card admin-table-card-full",children:[s.jsxs("div",{className:"admin-table-header",children:[s.jsx("h3",{className:"admin-table-title",children:"Recent Orders"}),s.jsxs("span",{className:"admin-table-count",children:[a?.length||0," total"]})]}),s.jsx("div",{className:"admin-table-container",children:a&&a.length>0?s.jsxs("table",{className:"admin-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Customer"}),s.jsx("th",{children:"Email"}),s.jsx("th",{children:"Type"}),s.jsx("th",{children:"Amount"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Date"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:a.slice(0,8).map(e=>{const t=e.monthly_price>0;return s.jsxs("tr",{children:[s.jsxs("td",{children:[s.jsx("div",{className:"table-cell-primary",children:e.name}),s.jsx("div",{className:"table-cell-secondary",children:e.phone})]}),s.jsx("td",{children:s.jsx("div",{className:"table-cell-primary",children:e.email})}),s.jsxs("td",{children:[s.jsx("span",{className:`type-badge type-${t?"subscription":"onetime"}`,children:t?s.jsxs(s.Fragment,{children:[s.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginRight:"4px"},children:s.jsx("path",{d:"M7 1V13M1 7H13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Subscription"]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginRight:"4px"},children:s.jsx("path",{d:"M7 1L13 7L7 13M1 7H13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"One-time"]})}),t&&e.monthly_price&&s.jsxs("div",{className:"table-cell-secondary",style:{marginTop:"4px"},children:[e.monthly_price," ֏/month"]})]}),s.jsxs("td",{children:[s.jsx("div",{className:"table-cell-primary",children:t?e.monthly_price?`${e.monthly_price} ֏/month`:"—":e.total_price?`${e.total_price} ֏`:"—"}),!t&&e.quantity&&s.jsxs("div",{className:"table-cell-secondary",style:{marginTop:"4px"},children:["Qty: ",e.quantity]})]}),s.jsx("td",{children:s.jsx("span",{className:`status-badge status-${e.status}`,children:e.status})}),s.jsxs("td",{children:[s.jsx("div",{className:"table-cell-primary",children:new Date(e.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),s.jsx("div",{className:"table-cell-secondary",children:new Date(e.created_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),s.jsxs("td",{children:[t&&(e.status==="pending"||e.status==="active")&&s.jsxs("button",{onClick:()=>h(e.id,e.name),disabled:r===e.id,className:"admin-cancel-order-btn",title:"Cancel subscription to stop future payments",children:[r===e.id?s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"spinner",children:s.jsxs("circle",{cx:"8",cy:"8",r:"6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"31.416",strokeDashoffset:"31.416",children:[s.jsx("animate",{attributeName:"stroke-dasharray",dur:"2s",values:"0 31.416;15.708 15.708;0 31.416;0 31.416",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"stroke-dashoffset",dur:"2s",values:"0;-15.708;-31.416;-31.416",repeatCount:"indefinite"})]})}):s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 4L4 12M4 4L12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Cancel"]}),e.status==="cancelled"&&s.jsx("span",{className:"admin-cancelled-badge",children:"Cancelled"})]})]},e.id)})})]}):s.jsxs("div",{className:"admin-empty-state",children:[s.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M9 12H15M9 16H15M17 21H7C5.89543 21 5 20.1046 5 19V5C5 3.89543 5.89543 3 7 3H12.5858C12.851 3 13.1054 3.10536 13.2929 3.29289L18.7071 8.70711C18.8946 8.89464 19 9.149 19 9.41421V19C19 20.1046 18.1046 21 17 21Z",stroke:"#05435C40",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),s.jsx("p",{children:"No orders yet"})]})})]})]})]})]})]})}export{w as default};
